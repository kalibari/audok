{
    "app-id" : "org.audok.Audok",
    "runtime" : "org.gnome.Platform",
    "sdk": "org.gnome.Sdk",
    "runtime-version" : "3.38",
    "command" : "audok.py",
    "copy-icon": true,
    "finish-args" : [
        "--device=all",
        "--share=ipc",
        "--share=network",
        "--filesystem=xdg-music",
        "--filesystem=xdg-download",
        "--filesystem=/usr/bin",
        "--filesystem=/dev/shm",
        "--filesystem=xdg-run/pipewire-0:ro",
        "--socket=session-bus",
        "--socket=system-bus",
        "--socket=fallback-x11",
        "--socket=pulseaudio",
        "--socket=wayland",
        "--system-talk-name=org.freedesktop.RealtimeKit1",
        "--talk-name=org.freedesktop.Notifications"
    ],
    "modules" : [
        {
            "name": "ffmpeg",
            "config-opts": [
              "--enable-rpath",
              "--enable-gpl",
              "--disable-static",
              "--enable-shared",
              "--disable-doc",
              "--disable-alsa",
              "--disable-libx264",
              "--disable-libx265",
              "--enable-libmp3lame"
            ],
            "sources": [{
              "type": "archive",
              "url": "https://www.ffmpeg.org/releases/ffmpeg-4.3.2.tar.xz",
              "sha256": "46e4e64f1dd0233cbc0934b9f1c0da676008cad34725113fb7f802cfa84ccddb"
            }],
            "cleanup": ["/share/ffmpeg/examples"]
        },
        {
            "name": "streamripper",
            "sources": [{
              "type": "archive",
              "url": "https://downloads.sourceforge.net/sourceforge/streamripper/streamripper-1.64.6.tar.gz",
              "sha256": "c1d75f2e9c7b38fd4695be66eff4533395248132f3cc61f375196403c4d8de42"
            }]
        },
        {
            "name": "youtube-dl",
            "no-autogen": true,
            "no-make-install": true,
            "make-args": ["youtube-dl", "PYTHON=/usr/bin/python"],
            "sources": [{
              "type": "archive",
              "url": "https://github.com/ytdl-org/youtube-dl/releases/download/2020.02.16/youtube-dl-2020.02.16.tar.gz",
              "sha256": "abcd19c109125a69915c6ad70fcc6b02411a64427fbb7b91a6b37217dfb9e0c6"
            }],
            "post-install": ["install -Dm0755 -t /app/bin youtube-dl"]
        },
        {
            "name" : "audok",
            "buildsystem" : "simple",
            "build-commands": [
                "install -D audok.py /app/bin/audok.py",
                "install -D org.audok.Audok.desktop /app/share/applications/org.audok.Audok.desktop",
                "install -D org.audok.Audok.png /app/share/icons/hicolor/256x256/apps/org.audok.Audok.png",
                "install -D audok_large.png /app/share/audok/audok_large.png",
                "install -D tab_about.py /app/share/audok/tab_about.py",
                "install -D tab_audioplayer.py /app/share/audok/tab_audioplayer.py",
                "install -D main.py /app/share/audok/main.py",
                "install -D tab_streamripper.py /app/share/audok/tab_streamripper.py",
                "install -D tab_coverter.py /app/share/audok/tab_coverter.py",
                "install -D tab_settings.py /app/share/audok/tab_settings.py",
                "install -D newdir.png /app/share/audok/newdir.png",
                "install -D back_black.png /app/share/audok/back_black.png",
                "install -D next_black.png /app/share/audok/next_black.png",
                "install -D pause_white.png /app/share/pause_white.png",
                "install -D streamripperdir_small.png /app/share/audok/streamripperdir_small.png",
                "install -D back_white.png /app/share/audok/back_white.png",
                "install -D next_white.png /app/share/audok/next_white.png",
                "install -D play_black.png /app/share/audok/play_black.png",
                "install -D loop_small.png /app/share/audok/loop_small.png",
                "install -D olddir.png /app/share/audok/olddir.png",
                "install -D play_white.png /app/share/audok/play_white.png",
                "install -D olddir_small.png /app/share/audok/olddir_small.png",
                "install -D auto_olddir_small.png /app/share/audok/auto_olddir_small.png",
                "install -D newdir_small.png /app/share/audok/newdir_small.png",
                "install -D pause_black.png /app/share/audok/pause_black.png",
                "install -D streamripperdir.png /app/share/audok/streamripperdir.png"
            ],

            "sources": [
                {
                    "type": "file",
                    "path": "bin/audok.py"
                },
                {
                    "type": "file",
                    "path": "share/applications/org.audok.Audok.desktop"
                },
                {
                    "type": "file",
                    "path": "share/audok/tab_about.py"
                },
                {
                    "type": "file",
                    "path": "share/audok/tab_audioplayer.py"
                },
                {
                    "type": "file",
                    "path": "share/audok/main.py"
                },
                {
                    "type": "file",
                    "path": "share/audok/tab_streamripper.py"
                },
                {
                    "type": "file",
                    "path": "share/audok/tab_coverter.py"
                },                
                {
                    "type": "file",
                    "path": "share/audok/tab_settings.py"
                },
                {
                    "type": "file",
                    "path": "share/audok/newdir.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/back_black.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/next_black.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/pause_white.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/streamripperdir_small.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/back_white.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/next_white.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/play_black.png"
                },
                {
                    "type": "file",
                    "path": "share/icons/hicolor/256x256/apps/org.audok.Audok.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/audok_large.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/loop_small.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/olddir.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/play_white.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/olddir_small.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/auto_olddir_small.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/newdir_small.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/pause_black.png"
                },
                {
                    "type": "file",
                    "path": "share/audok/streamripperdir.png"
                }
            ]
        }
    ]
}

